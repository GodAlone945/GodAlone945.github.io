# vue 定义元素拖动事件

Created: May 24, 2022 9:59 AM
标签: directives, v-drag, vue

```jsx
<div class="mobile"
     v-drag
     v-cloak>
	<div class="QRcode-box" v-show="QRCodeMobileStatus">
		<img :src="MobileQRCode" alt="">
		<p>扫码关注“分班大师”</p>
	</div>
	<div class="main"
       @mouseenter="QRCodeMobileStatus = true"
       @mouseleave = "QRCodeMobileStatus = false">
		<img src="./img/weixin.svg" alt="">
		<p>微信上使用</p>
	</div>
</div>

<script>
export default {
	directives: {
		drag: function (e) {
			let moveTarget = e
			moveTarget.mousedown = (mouse1) => {
				// 获取鼠标距离拖动元素的顶部距离
				let theHeightMouseToMoveTargetTop = mouse1.clientY - moveTarget.offsetTop
				document.onmousemove = (mouse2) => {
					// 获取移动过程中元素头部到页面顶部的距离
					let move = mouse2.clientY - theHeightMouseToMoveTargetTop
					// 添加拖动范围限制 
					if (window.innerHeight - 40 >= move && move >= 168) {
						moveTarget.style.top = move + 'px'
					}
				}
				document.onmouseup = () => {
					document.onmousemove = null
					document.onmouseup = null
				}
			}
		}
	}
}
</script>
```