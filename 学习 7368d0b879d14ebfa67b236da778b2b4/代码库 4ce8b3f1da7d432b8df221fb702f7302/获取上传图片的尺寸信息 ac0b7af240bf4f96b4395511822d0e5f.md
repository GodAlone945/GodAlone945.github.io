# 获取上传图片的尺寸信息

Created: June 3, 2021 10:12 AM
标签: JS, 代码

- 监听上传事件我们通过监听`change`事件实现，并定义读取文件对象`FileReader`
- 在图片上传完毕后将图片转化成`base64`格式，以便Image对象根据该格式获取到图片
- 要在`Image`对象加载完毕后再检查尺寸，否则获取到的尺寸会是0*0
- 检查尺寸不能使用`width`和`height`属性，这两个属性在未手动指定之前，永远都是0
- 获取图片尺寸需要使用`naturalWidth`和`naturalHeight`属性，这两个属性会返回图片的真实大小。

```jsx
if(files.length!=0){//保证用户选择了图片，而不是点击了取消上传按钮
        var fileName=files[0].name;//获取上传图片名称，如不需要，可不写
        var fileReader = new FileReader();
        fileReader.readAsDataURL(files[0]);//根据图片路径读取图片
        fileReader.onload = function(e) {
            var base64 = this.result;  // 获取到图片的base64位格式
            var img = new Image();
            img.src = base64;
            img.onload = function() {
            alert(img.naturalWidth+ " " + img.naturalHeight);
		}
	}
}
```