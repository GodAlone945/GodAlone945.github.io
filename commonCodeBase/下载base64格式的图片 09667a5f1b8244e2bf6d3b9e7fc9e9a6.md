# 下载base64格式的图片

Created: July 29, 2021 9:35 PM
标签: base64, 下载, 图片

```jsx
/* ========== 点击下载图标事件 ========== */
    download (item) {
			// 调用方法，将base64转为Blob类型
      const myBlob = this.dataURLtoBlob(item.link)
			// 创建URL
      const myUrl = URL.createObjectURL(myBlob)
      const name = `${item.name}-${item.alias.join('-')}`
      this.downloadImage(myUrl, name) // myUrl: 图片base64转成的url  name: 下载图片名称
    },
    /* ========== 下载图片事件 ========== */
    downloadImage (link, name) {
      const a = document.createElement('a')
      a.setAttribute('href', link)
      a.setAttribute('download', name)
      a.setAttribute('target', '_blank')
      const clickEvent = document.createEvent('mouseEvents')
      clickEvent.initEvent('click', true, true)
      a.dispatchEvent(clickEvent)
    },
    dataURLtoBlob (link) {
      const arr = link.split(',')
      const mime = arr[0].match(/:(.*?);/)[1]
      const bstr = atob(arr[1]) // 解码base64编码的字符串
      let n = bstr.length
      const u8arr = new Uint8Array(n)
      while (n--) {
        u8arr[n] = bstr.charCodeAt(n)
      }
      return new Blob([u8arr], { type: mime })
    }
```