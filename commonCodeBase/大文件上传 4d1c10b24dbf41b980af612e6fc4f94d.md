# 大文件上传

Created: June 3, 2022 9:15 PM
标签: JS, 上传文件

### 文件切片

获取上传文件的二进制内容，对齐拆分，然后上传到服务器。

文件`File` 对象是`Blob` 对象的子类，`Blob` 对象包含一个重要的方法`slice` ，对二进制转文件进行拆分。

```jsx
function slice (file, piece = 1024 * 1024 * 5) {
	let totalSize = file.size // 文件总大小
	let start = 0 // 每次上传的开始字节
	let end = start + piece // 每次上传的结尾字节
	let chunks = []
	while (start < totalSize) {
		let blob = file.slice(start, end)
		chunks.push(blob)
		start = end
		end = start + piece
	}
	return chunks
}
```