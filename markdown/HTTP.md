# 了解
## 网络基础 TCP/IP
### TCP/IP 的分层管理

该协议族里最重要的一点就是**分层**。  

1. 应用层
- 决定了向用户提供应用服务时通信的活动。
- 该协议族内预存了各类通用的应用服务。
- 比如。FTP(file Transfer Protocol，文件传输协议）和 DNS（Domain Name System，域名系统）
- HTTP 协议也处于盖层
2. 传输层
- 传输层对上层应用层，提供出于网络连接中的两台计算机之间的数据传输。
- 在该层有两个性质不同的协议：TCP（Transmission Control Protocol，传输控制协议）和 UDP（User Data Protocol，用户数据报协议）
3. 网络层（网络互联层）
- 网络层用来处理在网络上流动的数据包
- **数据包**是网络传输的最小数据单位
- 该层规定了通过怎样的路径（所谓的传输路线）到达对方计算机，并把数据包传送给对方。
- 与对方计算机之间通过多台计算机或网络设备进行传输时，网络层所起的作用就是在众多的选项内选择一条传输路线。
4. 数据链路层（数据链路层，网络接口层）
- 用来处理连接网络的硬件部分
- 硬件上的范畴均在链路层的作用范围之内

### TCP/IP 通信传输流
客户端  HTTP客户端 <-> TCP <-> IP <-> 网络 <--
                                                                          |
服务端  HTTP服务器 <-> TCP <-> IP <-> 网络 <--

在利用 TCP/IP 协议族进行网络通信时，会通过分层顺序与对方进行通信。

发送端从应用层往下走，接收端则往应用层往上走。

1. 作为发送端的客户端在应用层（HTTP协议）发出一个想看某个 Web 页面的HTTP请求。

2. 在传输层（TCP协议）把从应用层出收到的数据（HTTP请求报文）进行分割，并在各个报文上打上标记序号及端口号后转发给网络层。

3. 在网络层（IP协议），增加作为通信目的地的MAC地址后转发给链路层。这样一来，发往网络的通信请求就准备齐全了。

4. 接收端的服务器在链路层接收到数据，按序往上层发送，一直到应用层。当传输到应用层，才能算真正接收到有客户端发送过来的 HTTP 请求。

## 与 HTTP 关系密切的协议：IP、TCP和DNS

### 负责传输的 IP 协议

位于网络层

“IP”是一种协议的名称

作用就是把各种数据包传送给对方。

要保证确实传送到对方那里，两个重要的条件是 `IP` 地址和 `MAC` 地址

- `IP` 地址指明了节点被分配到的地址
- `MAC` 地址是指网卡所属的固定地址
- `IP` 地址可以和 `MAC` 地址进行配对
- `IP` 地址可变换，但 `MAC` 地址基本上不会更改

**使用 ARP 协议凭借 MAC 地址进行通信**

- 不在同一局域网内的情况下，需要通过多台计算机和网络设备中转才能连接到对方。
- 进行中转时，会利用下一站中转设备的 MAC 地址来搜索下一个中转目标。
- 这是，会采用 ARP 协议。
- ARP 是一种以解析地址的协议，根据通信方的 IP 地址就可以反查出对应的 MAC 地址。

### 确保可靠性的 TCP 协议

`TCP` 位于传输层，提供可靠的字节流服务。

字节流服务：为了方便传输，将大块数据分割成以报文段为单位的数据包进行管理。

可靠的传输服务： 能够把数据准确可靠地传给对方。

TCP 协议为了更容易传送大数据才把数据分隔，而且 TCP 协议能够确认数据最终是否送达到对方。

**确保数据能到达目标**

准确无误将数据送达目标 ——> `TCP` 协议采用了三次握手策略。

用 `TCP` 协议把数据包送出去后，`TCP` 不会对传送后的情况置之不理，一定会向对方确认是否成功送达。

握手过程中使用了 `TCP` 的标志（flag） —— SYN(synchronize) 和 ACK (acknowledgement)


1. 发送端先发送一个带 `SYN` 标志的数据包给对方。
2. 接收端收到后，回传一个带有 `SYN/ACK` 标志的数据包以示传达信息。
3. 发送端再回传一个带 `ACK` 标志的数据包，代表`握手`结束

**若在握手过程中某个阶段莫名中断，`TCP` 协议会再次以相同的顺序发送相同的数据包**

### 负责解析域名的DNS服务

`DNS` 服务和 `HTTP` 协议一样位于应用层的协议。提供域名到 `IP` 地址之间的解析服务。

### 各种协议与 HTTP 协议的关系

```js
客户端 ——————————获取想访问网址的 IP 地址——————————> DNS
      <————网址对应的 IP 地址是 20X.189.105.112————
      ————————————————————
                          ↓
          HTTP 协议的职责
          生成针对目标 Web 服务器的 HTTP 请求报文
          ->请给我页面的资源<-
                          ↓
          TCP 协议的职责
          为了方便通信，将 HTTP 请求报文分割成报文段
                      [][][][][][] 按序号分为多个报文段
                      把每个报文段可靠地传给对方
                          ↓
路由器     IP 协议的职责
          搜索对方的地址，一边中转一边传送
                          ↓
          TCP 协议的职责
          从对方那里接收到的报文段
                    重组到达的报文段
                    [         ] 按序号以原来的顺序重组请求报文
                          ↓
          HTTP 协议的职责
          对 Web 服务器请求的内容的处理
          ->原来是想要这台计算机上的/xss/资源啊<-
                          ↓
服务器
hackr.jp                  请求的处理结果也同样利用 TCP/IP 通信协议
IP 地址 20X.189.105.112   向用户进行回传
```

### URI和URL

#### 统一资源标识符

`URI` -> 统一资源标识符 -> `Uniform Resource Identifier`
`URL` -> 统一资源定位符

**`Uniform`**  
规定统一的格式可方便处理多种不同类型的资源，加入新增的协议方案也更容易。

**`Resource`**  
资源的定义是"可标识的任何东西"。除了文档文件、图像或服务等能够区别于其他类型的，全部可作为资源。资源不仅可以是单一的，也可以是多数的集合体。

**`Identifier`**  
标识可标识的对象。也称为标识符。  

`URI` =》由某个协议方案表示的资源的定位标识符。协议方案是指访问资源使用的协议类型名称。  
采用 HTTP 协议时，协议方案就是 http。

`URI` 用字符串标识某一互联网资源，而 `URL` 表示资源的地点（互联网上所处的位置）。  
`URL` 是 `URI` 的子集。  

#### URI格式

表示指定的 `URI` ，要使用涵盖全部必要信息的绝对 `URI`、绝对 `URL`以及相对 `URL`。

> 1:[http://]  2:[user:pass]  @  3:[www.example.jp]  : 4:[80]  /  5:[dir/index.htm]  ?  6:[uid=1]  #  7:[ch1]

1. 登录信息（认证）  
指定用户名和密码作为从服务器端获取资源是必要的登录信息（身份认证）。可选项。

2. 服务器地址  
使用绝对`URI` 必须指定带访问的服务器地址。地址可以是类似`hackr.jp`这种`DNS`可解析的名称，或是192.168.1.1这类IPv4地址名，还可以是[0:0:0:0:0:0:0:1]这样的IPv6地址名

3. 服务器端口号  
指定服务器连接的网络端口号。可选项。

4. 带层次的文件路径  
指定服务器上的文件路径来定位特制的资源。

5. 查询字符串  
针对以指定的文件路径内的资源，可以使用查询字符串传入任意参数。可选

6. 片段标识符  
使用片段标识符通常可标记出以获取资源中的子资源（文档内的某个位置）。可选项。

# HTTP 协议

